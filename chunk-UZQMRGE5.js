import{b as o,d as y,g as b,i as w,l as S,m as P,n as M}from"./chunk-YPM6AFMT.js";import{a as k}from"./chunk-CJRHIBMB.js";import{a as x}from"./chunk-6IJRFTY6.js";import{i as h,j as v,m as C}from"./chunk-YZFDS22F.js";import{$a as s,Aa as i,Ja as g,Ua as n,X as d,ab as m,bb as u,db as f,kb as l,oa as p,ob as _}from"./chunk-BW4FWTPU.js";function L(a){return c=>{let t=c.parent;if(!t)return null;let r=t.get(a)?.value,e=c.value;return r===e?null:{passwordMismatch:!0}}}var O=()=>["/comunidade","login"],H=(()=>{class a{constructor(){this.formService=d(P),this.authService=d(k),this.router=d(h),this.isLoading=p(!1),this.form=this.formService.createForm({name:{validators:[o.required,o.maxLength(150)]},email:{validators:[o.required,o.email]},password:{validators:[o.required,o.minLength(6)]},confirmPassword:{validators:[L("password"),o.required]}})}getControl(t){return this.form.get(t)}onSubmit(){if(this.form.valid){this.isLoading.set(!0);let{name:t,email:r}=this.form.getRawValue();this.authService.register(t,r).subscribe({next:()=>{this.router.navigate(["comunidade"]),this.isLoading.set(!1)},error:e=>{console.error("Login failed:",e),this.isLoading.set(!1)}})}}static{this.\u0275fac=function(r){return new(r||a)}}static{this.\u0275cmp=g({type:a,selectors:[["pgm-register"]],decls:17,vars:10,consts:[[1,"register"],[1,"register__container"],[1,"register__title"],[1,"register__message"],[1,"register__form",3,"ngSubmit","formGroup"],["label","Nome completo","type","text","placeholder","Digite seu nome","name","name",3,"control"],["label","Email","type","email","placeholder","Digite seu email","name","email",3,"control"],["label","Senha","type","password","placeholder","Digite sua senha","name","senha",3,"control"],["label","Repita a senha","type","password","placeholder","Repita a senha","name","senha",3,"control"],["text","Cadastrar","loadingText","Cadastrando...","type","submit",3,"loading","disabled","block"],[1,"register__links"],[3,"routerLink"]],template:function(r,e){r&1&&(s(0,"div",0)(1,"div",1)(2,"h1",2),l(3,"Crie sua conta"),m(),s(4,"p",3),l(5,"Preencha os campos abaixo para criar sua conta."),m(),s(6,"form",4),f("ngSubmit",function(){return e.onSubmit()}),u(7,"pgm-text-input",5)(8,"pgm-text-input",6)(9,"pgm-text-input",7)(10,"pgm-text-input",8)(11,"pgm-button",9),s(12,"div",10)(13,"span"),l(14,"J\xE1 tem uma conta?"),m(),s(15,"a",11),l(16,"Fa\xE7a login"),m()()()()()),r&2&&(i(6),n("formGroup",e.form),i(),n("control",e.getControl("name")),i(),n("control",e.getControl("email")),i(),n("control",e.getControl("password")),i(),n("control",e.getControl("confirmPassword")),i(),n("loading",e.isLoading())("disabled",e.form.invalid)("block",!0),i(4),n("routerLink",_(9,O)))},dependencies:[S,b,y,w,C,v,x,M],styles:[".register[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:2rem;height:100%;background:linear-gradient(135deg,#5d786a,#91aa9d)}.register__container[_ngcontent-%COMP%]{width:95%;padding:1rem;border-radius:8px;background:#fff;box-shadow:0 2px 8px #0000001a}@media (min-width: 768px){.register__container[_ngcontent-%COMP%]{padding:2rem}}@media (min-width: 992px){.register__container[_ngcontent-%COMP%]{padding:3rem;width:40rem}}.register__title[_ngcontent-%COMP%]{text-align:center;color:#91aa9d}.register__message[_ngcontent-%COMP%]{margin-bottom:2rem;text-align:center;font-size:1.25rem;color:#6c757d}.register__form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.register__links[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:.5rem;margin-top:1.5rem}@media (min-width: 992px){.register__links[_ngcontent-%COMP%]{flex-direction:row;display:flex;justify-content:center;align-items:center}}.register__links[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#6c757d}"],changeDetection:0})}}return a})();export{H as RegisterComponent};
