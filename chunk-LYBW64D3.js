import{c as S,e as K,k as $,o as A,p as j,q as D}from"./chunk-OOUGZJYB.js";import{a as w,i as F}from"./chunk-PBDHKQDN.js";import{Cb as C,Db as b,Lb as d,Mb as E,Ua as p,W as f,Z as m,bb as k,da as s,gb as _,ja as y,ka as I,ob as g,rb as v,sb as x,ta as c,tb as P,ua as a,ub as M,vb as u,wa as T,wb as l,yb as O}from"./chunk-W6643XRK.js";var L=(()=>{class n{constructor(){this.fb=s(A)}createForm(t,o=[]){let e={};for(let[r,i]of Object.entries(t))e[r]=[i.value||"",i.validators||[]];return this.fb.nonNullable.group(e,{validators:o})}getFieldErrors(t,o){let e=o?.errors;if(!e)return[];if(!o?.touched)return[];let r=[];for(let i in e)switch(i){case"email":r.push(`Digite um email v\xE1lido no campo ${t}`);break;case"maxlength":r.push(`Digite no m\xE1ximo ${e[i].requiredLength} caracteres no campo ${t}`);break;case"minlength":r.push(`Digite no m\xEDnimo ${e[i].requiredLength} caracteres no campo ${t}`);break;case"passwordMismatch":r.push("As senhas n\xE3o coincidem");break;case"required":r.push(`Preencha o campo ${t}`);break}return r}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275prov=m({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function V(n,h){if(n&1&&(u(0,"label",1),d(1),l()),n&2){let t=b();g("for",t.label()),p(),E(t.label())}}function R(n,h){if(n&1){let t=O();u(0,"button",5),C("click",function(){y(t);let e=b();return I(e.clearInput())}),u(1,"span",6),d(2,"close"),l()()}}function B(n,h){if(n&1&&(u(0,"small",4),d(1),l()),n&2){let t=h.$implicit;p(),E(t)}}var tt=(()=>{class n{constructor(){this.autofocus=a(),this.blurEvent=c(),this.changed=c(),this.clearClicked=c(),this.control=a.required(),this.focusEvent=c(),this.keyupEvent=c(),this.label=a(),this.name=a(""),this.pasteEvent=c(),this.pattern=a(),this.placeholder=a(""),this.readonly=a(),this.required=a(),this.type=a("text"),this.value=a(""),this.formService=s(L)}clearInput(){this.control().setValue(""),this.changed.emit(""),this.clearClicked.emit(!0)}getErrors(){return this.formService.getFieldErrors(this.name(),this.control())}onBlur(t){this.blurEvent.emit(t)}onFocus(t){this.focusEvent.emit(t)}onInputChange(t){let e=t.target.value;this.changed.emit(e)}onKeyup(t){this.keyupEvent.emit(t)}onPaste(t){this.pasteEvent.emit(t)}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=k({type:n,selectors:[["pgm-text-input"]],inputs:{autofocus:[1,"autofocus"],control:[1,"control"],label:[1,"label"],name:[1,"name"],pattern:[1,"pattern"],placeholder:[1,"placeholder"],readonly:[1,"readonly"],required:[1,"required"],type:[1,"type"],value:[1,"value"]},outputs:{blurEvent:"blurEvent",changed:"changed",clearClicked:"clearClicked",focusEvent:"focusEvent",keyupEvent:"keyupEvent",pasteEvent:"pasteEvent"},decls:6,vars:7,consts:[[1,"input-container"],[3,"for"],[3,"input","blur","focus","keyup","paste","id","type","value","placeholder","formControl"],[1,"input-container__clear-button"],[1,"input-container__error"],[1,"input-container__clear-button",3,"click"],[1,"material-icons"]],template:function(o,e){o&1&&(u(0,"div",0),_(1,V,2,2,"label",1),u(2,"input",2),C("input",function(i){return e.onInputChange(i)})("blur",function(i){return e.onBlur(i)})("focus",function(i){return e.onFocus(i)})("keyup",function(i){return e.onKeyup(i)})("paste",function(i){return e.onPaste(i)}),l(),_(3,R,3,0,"button",3),P(4,B,2,1,"small",4,x),l()),o&2&&(p(),v(e.label()?1:-1),p(),g("id",e.label())("type",e.type())("value",e.value())("placeholder",e.placeholder())("formControl",e.control()),p(),v(e.type()==="search"&&e.control().value?3:-1),p(),M(e.getErrors()))},dependencies:[D,S,K,$,j],styles:[".input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:1rem}@media (min-width: 768px){.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:1.2rem}}@media (min-width: 1200px){.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:1.4rem}}.input-container[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;gap:1rem;justify-content:center}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid #dee2e6;border-radius:.5rem;transition:border-color .3s ease}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:#749483;border-color:#749483}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{color:#fff;cursor:not-allowed;background:#ced4da}.input-container__clear-button[_ngcontent-%COMP%]{position:absolute;right:0;height:24px;font-weight:700;color:#749483}.input-container__error[_ngcontent-%COMP%]{color:#dc3545}"],changeDetection:0})}}return n})();var U={apiLocalizationUrl:"https://servicodados.ibge.gov.br/api/v1/localidades",apiUrl:"",production:!0};var pt=(()=>{class n{constructor(){this.http=s(w),this.isAuthenticated=T(this.hasValidToken()),this.router=s(F),this.API_URL=`${U.apiUrl}/auth`,this.TOKEN_KEY="access_token"}forgotPassword(t){return this.http.post(`${this.API_URL}/forgot-password`,{email:t})}getToken(){return sessionStorage.getItem(this.TOKEN_KEY)}login(t,o){return this.http.post(`${this.API_URL}/login`,{email:t,password:o}).pipe(f(e=>{sessionStorage.setItem(this.TOKEN_KEY,e.access_token),this.isAuthenticated.set(!0)}))}logout(){sessionStorage.removeItem(this.TOKEN_KEY),this.isAuthenticated.set(!1),this.router.navigate(["acesso-comunidade","login"])}register(t,o){return this.http.post(`${this.API_URL}/register`,{email:o,name:t}).pipe(f(()=>{this.isAuthenticated.set(!1)}))}hasValidToken(){return!0}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275prov=m({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();export{L as a,tt as b,U as c,pt as d};
