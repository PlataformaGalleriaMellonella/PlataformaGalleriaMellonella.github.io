import{b as i,d as b,e as x,g as C,j as y,k as w,l as S}from"./chunk-QBUG3MQY.js";import{a as P}from"./chunk-ZU3ZFTUG.js";import{a as v}from"./chunk-6IJRFTY6.js";import{i as h,m as _}from"./chunk-YZFDS22F.js";import{$a as m,Aa as o,Ja as g,Ua as n,X as s,ab as l,bb as u,db as f,kb as d,oa as c}from"./chunk-BW4FWTPU.js";function M(a){return p=>{let t=p.parent;if(!t)return null;let r=t.get(a)?.value,e=p.value;return r===e?null:{passwordMismatch:!0}}}var A=(()=>{class a{constructor(){this.formService=s(w),this.authService=s(P),this.router=s(h),this.isLoading=c(!1),this.form=this.formService.createForm({name:{validators:[i.required,i.maxLength(150)]},email:{validators:[i.required,i.email]},password:{validators:[i.required,i.minLength(6)]},confirmPassword:{validators:[M("password"),i.required]}})}getControl(t){return this.form.get(t)}onSubmit(){if(this.form.valid){this.isLoading.set(!0);let{name:t,email:r}=this.form.getRawValue();this.authService.register(t,r).subscribe({next:()=>{this.router.navigate(["comunidade"]),this.isLoading.set(!1)},error:e=>{console.error("Login failed:",e),this.isLoading.set(!1)}})}}static{this.\u0275fac=function(r){return new(r||a)}}static{this.\u0275cmp=g({type:a,selectors:[["pgm-register"]],decls:12,vars:8,consts:[[1,"register"],[1,"register__container"],[1,"register__form",3,"ngSubmit","formGroup"],[1,"register__title"],[1,"register__message"],["label","Nome completo","type","text","placeholder","Digite seu nome","name","name",3,"control"],["label","Email","type","email","placeholder","Digite seu email","name","email",3,"control"],["label","Senha","type","password","placeholder","Digite sua senha","name","senha",3,"control"],["label","Repita a senha","type","password","placeholder","Repita a senha","name","senha",3,"control"],["text","Cadastrar","loadingText","Cadastrando...","type","submit",3,"loading","disabled","block"]],template:function(r,e){r&1&&(m(0,"div",0)(1,"div",1)(2,"form",2),f("ngSubmit",function(){return e.onSubmit()}),m(3,"h1",3),d(4,"Complete seu cadastro"),l(),m(5,"p",4),d(6,"Preencha as informa\xE7\xF5es adicionais para finalizar."),l(),u(7,"pgm-text-input",5)(8,"pgm-text-input",6)(9,"pgm-text-input",7)(10,"pgm-text-input",8)(11,"pgm-button",9),l()()()),r&2&&(o(2),n("formGroup",e.form),o(5),n("control",e.getControl("name")),o(),n("control",e.getControl("email")),o(),n("control",e.getControl("password")),o(),n("control",e.getControl("confirmPassword")),o(),n("loading",e.isLoading())("disabled",e.form.invalid)("block",!0))},dependencies:[y,x,b,C,_,v,S],styles:[".register[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:2rem;height:100%;background:linear-gradient(to bottom right,#9cb3a7,#7f9c8d)}.register__container[_ngcontent-%COMP%]{display:flex;flex-direction:column;background:#fff;border-radius:8px;box-shadow:0 2px 8px #0000001a}@media (min-width: 992px){.register__container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-basis:35%}}.register__title[_ngcontent-%COMP%]{text-align:center;color:#91aa9d}.register__message[_ngcontent-%COMP%]{margin-bottom:2rem;text-align:center;font-size:1.25rem;color:#6c757d}.register__form[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;gap:1rem;padding:1rem}@media (min-width: 768px){.register__form[_ngcontent-%COMP%]{padding:2rem}}@media (min-width: 992px){.register__form[_ngcontent-%COMP%]{padding:4rem}}"],changeDetection:0})}}return a})();export{A as RegisterComponent};
