import{a as q,b as me}from"./chunk-RJOKBRBZ.js";import{a as pe,b as ce}from"./chunk-75PADCFH.js";import{c as te,d as p,e as oe,f as ne,i as ie,j as re,k as ae,l as le,m as se,p as de,q as V}from"./chunk-KG2CF7P2.js";import{a as ee}from"./chunk-FXNLQZX2.js";import{a as Q,i as W,j as X,m as Y}from"./chunk-DWR4Z56V.js";import{m as Z,o as K}from"./chunk-ALWD4M5K.js";import{$ as j,Cb as g,Db as f,F as O,Lb as m,Mb as C,Nb as N,Pb as J,Sa as B,Sb as F,Ta as i,Tb as I,Y as x,ab as v,ba as H,ca as u,fb as T,ia as y,j as L,ja as k,nb as d,ob as b,pb as G,qb as $,r as z,rb as U,sa as S,ta as s,tb as P,u as _,ua as A,ub as M,va as E,vb as r,wb as a,xb as h,yb as D}from"./chunk-62T5DOLL.js";function ue(n){return c=>{let e=c.parent;if(!e)return null;let t=e.get(n)?.value,o=c.value;return t===o?null:{passwordMismatch:!0}}}var Ce=(n,c)=>c.value;function ve(n,c){if(n&1&&(r(0,"label",1),m(1),a()),n&2){let e=f();i(),C(e.label())}}function be(n,c){if(n&1){let e=D();r(0,"li",7),g("click",function(){let o=y(e).$implicit,l=f(2);return k(l.selectOption(o))}),m(1),a()}if(n&2){let e=c.$implicit,t=f(2);b("selected",e.value===t.control().value),i(),N(" ",e.label," ")}}function we(n,c){if(n&1&&(r(0,"ul",4),P(1,be,2,3,"li",6,Ce),a()),n&2){let e=f();i(),M(e.options())}}function Oe(n,c){if(n&1&&(r(0,"small",5),m(1),a()),n&2){let e=c.$implicit;i(),C(e)}}var ge=(()=>{class n{constructor(){this.formService=u(q),this.elementRef=u(A),this.options=s.required(),this.control=s.required(),this.label=s(""),this.name=s(""),this.placeholder=s("Selecione uma op\xE7\xE3o"),this.disabled=s(!1),this.isOpen=E(!1),this.selectedValueChange=S()}onDocumentClick(e){this.elementRef.nativeElement.contains(e.target)||this.isOpen.set(!1)}toggleDropdown(e){e.stopPropagation(),this.disabled()||(this.isOpen.update(t=>!t),this.validateDropdown())}validateDropdown(){this.control().hasValidator(p.required)&&!this.control().value&&(this.control().markAsTouched(),this.control().setErrors({required:!0}))}onFocus(){this.validateDropdown()}selectOption(e){this.control().setValue(e.value),this.selectedValueChange.emit(e.value),this.isOpen.set(!1)}get selectedLabel(){let e=this.options()?.find(t=>t.value===this.control().value);return e?e.label:this.placeholder()}getErrors(){return this.formService.getFieldErrors(this.name(),this.control())}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=v({type:n,selectors:[["pgm-dropdown"]],hostBindings:function(t,o){t&1&&g("click",function(w){return o.onDocumentClick(w)},!1,B)},inputs:{options:[1,"options"],control:[1,"control"],label:[1,"label"],name:[1,"name"],placeholder:[1,"placeholder"],disabled:[1,"disabled"]},outputs:{selectedValueChange:"selectedValueChange"},decls:9,vars:7,consts:[[1,"dropdown"],[1,"dropdown__label"],[1,"dropdown__header",3,"focus","click"],[1,"dropdown__arrow"],[1,"dropdown__menu"],[1,"dropdown__error"],[3,"selected"],[3,"click"]],template:function(t,o){t&1&&(r(0,"div",0),T(1,ve,2,1,"label",1),r(2,"div",2),g("focus",function(){return o.onFocus()})("click",function(w){return o.toggleDropdown(w)}),r(3,"span"),m(4),a(),h(5,"span",3),a(),T(6,we,3,0,"ul",4),P(7,Oe,2,1,"small",5,U),a()),t&2&&(b("disabled",o.disabled()),i(),$(o.label()?1:-1),i(3),C(o.selectedLabel),i(),b("open",o.isOpen()),i(),$(o.isOpen()?6:-1),i(),M(o.getErrors()))},styles:[".dropdown__header[_ngcontent-%COMP%], .dropdown__menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:1rem}@media (min-width: 768px){.dropdown__header[_ngcontent-%COMP%], .dropdown__menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:1.5rem}}@media (min-width: 1200px){.dropdown__header[_ngcontent-%COMP%], .dropdown__menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:1.8rem}}.dropdown[_ngcontent-%COMP%]{position:relative;width:100%;color:#6c757d}.dropdown__label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:400}.dropdown__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border:1px solid #dee2e6;border-radius:.5rem;background-color:#fff;cursor:pointer;transition:all .3s ease}.dropdown__header[_ngcontent-%COMP%]:hover{border-color:#749483}.dropdown__arrow[_ngcontent-%COMP%]{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #749483;transition:transform .3s ease}.dropdown__arrow.open[_ngcontent-%COMP%]{transform:rotate(180deg)}.dropdown__menu[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;right:0;z-index:1000;margin-top:.25rem;padding:0;border:1px solid #dee2e6;border-radius:.5rem;box-shadow:0 2px 4px #00000026;max-height:200px;overflow-y:auto;background-color:#fff}.dropdown__menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer}.dropdown__menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, .dropdown__menu[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%]{background-color:#f8f9fa}.dropdown.disabled[_ngcontent-%COMP%]{opacity:.6;pointer-events:none}.dropdown.disabled[_ngcontent-%COMP%]   .dropdown__header[_ngcontent-%COMP%]{background-color:#f8f9fa}.dropdown__error[_ngcontent-%COMP%]{color:#dc3545}"],changeDetection:0})}}return n})();var Pe=new j("baseUrl"),_e=(()=>{class n{constructor(e){this.baseUrl=e,this.http=u(Q)}get(e,t,o){return this.http.get(`${this.baseUrl}/${e}`,{params:t,headers:o}).pipe(_(l=>l),O(this.handleError))}post(e,t,o){return this.http.post(`${this.baseUrl}/${e}`,t,{headers:o}).pipe(_(l=>l),O(this.handleError))}put(e,t,o){return this.http.put(`${this.baseUrl}/${e}`,t,{headers:o}).pipe(_(l=>l),O(this.handleError))}delete(e,t,o){return this.http.delete(`${this.baseUrl}/${e}`,{params:t,headers:o}).pipe(_(l=>l),O(this.handleError))}handleError(e){let t="Ocorreu um erro desconhecido";return e.error instanceof ErrorEvent?t=`Erro do cliente: ${e.error.message}`:t=`Erro do servidor: ${e.status} - ${e.message}`,console.error(t),z(()=>new Error(t))}static{this.\u0275fac=function(t){return new(t||n)(H(Pe))}}static{this.\u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Me=pe.apiLocalizationUrl,he=(()=>{class n extends _e{constructor(){super(Me)}getStates(){return this.get("estados?orderBy=nome").pipe(_(e=>e.map(t=>({label:t.nome,value:t.id}))))}getCity(e){return this.get(`estados/${e}/municipios?orderBy=nome`).pipe(_(t=>t.map(o=>({label:o.nome,value:o.id}))))}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ye=(n,c)=>c.label;function ke(n,c){if(n&1){let e=D();r(0,"div",3)(1,"label")(2,"input",4),g("change",function(o){y(e);let l=f();return k(l.onRadioChange(o))}),a(),h(3,"span",5),r(4,"span",6),m(5),a()()()}if(n&2){let e=c.$implicit,t=f();i(2),d("value",e.value)("checked",t.selectedValue()===e.value)("formControl",t.control())("required",t.required()),i(3),C(e.label)}}var fe=(()=>{class n{constructor(){this.options=s.required(),this.control=s.required(),this.selectedValue=s(""),this.required=s(!1),this.customClass=s(""),this.selectedValueChange=S(),this.groupLabel=s.required(),this.isHorizontal=s(!1)}onRadioChange(e){let t=e.target;this.selectedValueChange.emit(t.value)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=v({type:n,selectors:[["pgm-radio-group"]],inputs:{options:[1,"options"],control:[1,"control"],selectedValue:[1,"selectedValue"],required:[1,"required"],customClass:[1,"customClass"],groupLabel:[1,"groupLabel"],isHorizontal:[1,"isHorizontal"]},outputs:{selectedValueChange:"selectedValueChange"},decls:6,vars:5,consts:[[1,"radio-group"],[1,"radio-group__label"],[1,"radio-group__options"],[1,"radio-group__option"],["type","radio",1,"radio-group__input",3,"change","value","checked","formControl","required"],[1,"radio-checkmark"],[1,"radio-label"]],template:function(t,o){t&1&&(r(0,"div",0)(1,"label",1),m(2),a(),r(3,"div",2),P(4,ke,6,5,"div",3,ye),a()()),t&2&&(G(o.customClass()),b("horizontal",o.isHorizontal()),i(2),C(o.groupLabel()),i(2),M(o.options()))},dependencies:[de,te,re,oe,se,V,ae],styles:['.radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.radio-group.horizontal[_ngcontent-%COMP%]   .radio-group__options[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;gap:2rem}.radio-group__label[_ngcontent-%COMP%]{font-weight:400;color:#6c757d}.radio-group__options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.radio-group__option[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}.radio-group__option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{position:absolute;opacity:0;cursor:pointer}.radio-group__option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:checked ~ .radio-checkmark[_ngcontent-%COMP%]{background-color:#749483;border-color:#749483}.radio-group__option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:checked ~ .radio-checkmark[_ngcontent-%COMP%]:after{content:"";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:10px;height:10px;border-radius:50%;background-color:#fff}.radio-group__option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:disabled ~ .radio-checkmark[_ngcontent-%COMP%]{background-color:#ced4da;border-color:#ced4da;cursor:not-allowed}.radio-group__option[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;color:#6c757d;cursor:pointer}.radio-group__option[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .radio-checkmark[_ngcontent-%COMP%]{position:relative;height:25px;width:25px;border-radius:50%;border:2px solid #dee2e6;transition:all .3s ease}.radio-group__option[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .radio-checkmark[_ngcontent-%COMP%]:hover{background-color:#e9ecef;cursor:pointer}.radio-group__option[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .radio-label[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}'],changeDetection:0})}}return n})();var Se=()=>["/acesso-comunidade","login"],ht=(()=>{class n{constructor(){this.formService=u(q),this.localizationService=u(he),this.authService=u(ce),this.router=u(W),this.states$=new L,this.cities$=new L,this.personTypes=[{label:"Professor",value:"professor"},{label:"Estudante",value:"estudante"},{label:"Pesquisador",value:"pesquisador"},{label:"Outros",value:"outros"}],this.isLoading=E(!1),this.form=this.formService.createForm({personType:{value:"professor",validators:[p.required]},name:{validators:[p.required,p.maxLength(150)]},state:{validators:[p.required]},city:{validators:[p.required]},institution:{validators:[p.required]},lineOfResearch:{validators:[p.required]},email:{validators:[p.required,p.email]},password:{validators:[p.required,p.minLength(6)]},confirmPassword:{validators:[ue("password"),p.required]}})}ngOnInit(){this.states$=this.localizationService.getStates()}onStateChange(e){this.cities$=this.localizationService.getCity(Number(e))}getControl(e){return this.form.get(e)}onSubmit(){if(this.form.valid){this.isLoading.set(!0);let{name:e,email:t}=this.form.getRawValue();this.authService.register(e,t).subscribe({next:()=>{this.router.navigate(["comunidade"]),this.isLoading.set(!1)},error:o=>{console.error("Login failed:",o),this.isLoading.set(!1)}})}}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=v({type:n,selectors:[["pgm-register"]],decls:24,vars:23,consts:[[1,"register"],[1,"register__container"],[1,"register__title"],[1,"register__message"],[1,"register__form",3,"ngSubmit","formGroup"],["groupLabel","Profiss\xE3o",3,"control","options","isHorizontal"],["label","Nome","type","text","placeholder","Digite seu nome completo","name","nome",3,"control"],["label","Email","type","email","placeholder","Digite seu email","name","email",3,"control"],["name","estado","placeholder","Selecione o Estado","label","Estado",3,"selectedValueChange","control","options"],["placeholder","Selecione a cidade","label","Cidade",3,"control","options"],["label","Institui\xE7\xE3o","type","text","placeholder","Digite a institui\xE7\xE3o","name","institui\xE7\xE3o",3,"control"],["label","Linha de pesquisa","type","text","placeholder","Digite a linha de pesquisa","name","linha de pesquisa",3,"control"],["label","Senha","type","password","placeholder","Digite sua senha","name","senha",3,"control"],["label","Repita a senha","type","password","placeholder","Repita a senha","name","senha",3,"control"],["text","Cadastrar","loadingText","Cadastrando...","type","submit",3,"loading","disabled","block"],[1,"register__links"],[3,"routerLink"]],template:function(t,o){t&1&&(r(0,"div",0)(1,"div",1)(2,"h1",2),m(3,"Crie sua conta"),a(),r(4,"p",3),m(5,"Preencha os campos abaixo para criar sua conta."),a(),r(6,"form",4),g("ngSubmit",function(){return o.onSubmit()}),h(7,"pgm-radio-group",5)(8,"pgm-text-input",6)(9,"pgm-text-input",7),r(10,"pgm-dropdown",8),F(11,"async"),g("selectedValueChange",function(w){return o.onStateChange(w)}),a(),h(12,"pgm-dropdown",9),F(13,"async"),h(14,"pgm-text-input",10)(15,"pgm-text-input",11)(16,"pgm-text-input",12)(17,"pgm-text-input",13)(18,"pgm-button",14),r(19,"div",15)(20,"span"),m(21,"J\xE1 tem uma conta?"),a(),r(22,"a",16),m(23,"Fa\xE7a login"),a()()()()()),t&2&&(i(6),d("formGroup",o.form),i(),d("control",o.getControl("personType"))("options",o.personTypes)("isHorizontal",!0),i(),d("control",o.getControl("name")),i(),d("control",o.getControl("email")),i(),d("control",o.getControl("state"))("options",I(11,18,o.states$)),i(2),d("control",o.getControl("city"))("options",I(13,20,o.cities$)),i(2),d("control",o.getControl("institution")),i(),d("control",o.getControl("lineOfResearch")),i(),d("control",o.getControl("password")),i(),d("control",o.getControl("confirmPassword")),i(),d("loading",o.isLoading())("disabled",o.form.invalid)("block",!0),i(4),d("routerLink",J(22,Se)))},dependencies:[V,ie,ne,le,Y,X,ee,me,ge,K,Z,fe],styles:[".register[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;background:linear-gradient(135deg,#5d786a,#749483)}.register__container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem;width:95vw;border-radius:.5rem;background:#fff;padding:3rem}@media (min-width: 768px){.register__container[_ngcontent-%COMP%]{padding:4.5rem}}@media (min-width: 1200px){.register__container[_ngcontent-%COMP%]{padding:6rem}}@media (min-width: 768px){.register__container[_ngcontent-%COMP%]{width:80vw}}@media (min-width: 1200px){.register__container[_ngcontent-%COMP%]{width:35vw}}.register__title[_ngcontent-%COMP%]{text-align:center;color:#749483}.register__message[_ngcontent-%COMP%]{text-align:center}.register__form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.register__links[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:1rem}@media (min-width: 992px){.register__links[_ngcontent-%COMP%]{align-items:center}}.register__links[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#6c757d}"],changeDetection:0})}}return n})();export{ht as RegisterComponent};
