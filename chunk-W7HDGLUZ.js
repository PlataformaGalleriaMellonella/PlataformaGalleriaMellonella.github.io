import{c as K,e as j,k as J,o as D,p as R,q as V}from"./chunk-L7CLB6AY.js";import{a as F,i as S}from"./chunk-Z5FC3BP6.js";import{Bb as v,Cb as I,Kb as d,Lb as C,Ta as l,V as y,Y as m,ab as T,ca as s,fb as f,ia as E,ja as M,nb as _,q as b,qb as g,rb as x,sa as c,sb as O,ta as a,tb as w,ub as p,va as k,vb as u,xb as P}from"./chunk-JOZAMYW2.js";var A=(()=>{class n{constructor(){this.fb=s(D)}createForm(e,i=[]){let t={};for(let[r,o]of Object.entries(e))t[r]=[o.value||"",o.validators||[]];return this.fb.nonNullable.group(t,{validators:i})}getFieldErrors(e,i){let t=i?.errors;if(!t)return[];if(!i?.touched)return[];let r=[];for(let o in t)switch(o){case"required":r.push(`Preencha o campo ${e}`);break;case"email":r.push(`Digite um email v\xE1lido no campo ${e}`);break;case"minlength":r.push(`Digite no m\xEDnimo ${t[o].requiredLength} caracteres no campo ${e}`);break;case"maxlength":r.push(`Digite no m\xE1ximo ${t[o].requiredLength} caracteres no campo ${e}`);break;case"passwordMismatch":r.push("As senhas n\xE3o coincidem");break}return r}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=m({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var N={production:!0,apiUrl:"",apiLocalizationUrl:"https://servicodados.ibge.gov.br/api/v1/localidades"};var ne=(()=>{class n{constructor(){this.API_URL=`${N.apiUrl}/auth`,this.TOKEN_KEY="access_token",this.router=s(S),this.http=s(F),this.isAuthenticated=k(this.hasValidToken())}login(e,i){return sessionStorage.setItem(this.TOKEN_KEY,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"),this.isAuthenticated.set(!0),b({access_token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",user:{id:1,username:"Marcelo",email:"email@email.com"}})}register(e,i){return this.http.post(`${this.API_URL}/register`,{name:e,email:i}).pipe(y(t=>{this.isAuthenticated.set(!1)}))}forgotPassword(e){return this.http.post(`${this.API_URL}/forgot-password`,{email:e})}logout(){sessionStorage.removeItem(this.TOKEN_KEY),this.isAuthenticated.set(!1),this.router.navigate(["acesso-comunidade","login"])}getToken(){return sessionStorage.getItem(this.TOKEN_KEY)}hasValidToken(){return!0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=m({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function U(n,h){if(n&1&&(p(0,"label",1),d(1),u()),n&2){let e=I();_("for",e.label()),l(),C(e.label())}}function q(n,h){if(n&1){let e=P();p(0,"button",5),v("click",function(){E(e);let t=I();return M(t.clearInput())}),p(1,"span",6),d(2,"close"),u()()}}function G(n,h){if(n&1&&(p(0,"small",4),d(1),u()),n&2){let e=h.$implicit;l(),C(e)}}var pe=(()=>{class n{constructor(){this.formService=s(A),this.label=a(),this.control=a.required(),this.name=a(""),this.value=a(""),this.placeholder=a(""),this.type=a("text"),this.required=a(),this.readonly=a(),this.pattern=a(),this.autofocus=a(),this.changed=c(),this.blurEvent=c(),this.focusEvent=c(),this.keyupEvent=c(),this.pasteEvent=c(),this.clearClicked=c()}onInputChange(e){let t=e.target.value;this.changed.emit(t)}onBlur(e){this.blurEvent.emit(e)}onFocus(e){this.focusEvent.emit(e)}onKeyup(e){this.keyupEvent.emit(e)}onPaste(e){this.pasteEvent.emit(e)}clearInput(){this.control().setValue(""),this.changed.emit(""),this.clearClicked.emit(!0)}getErrors(){return this.formService.getFieldErrors(this.name(),this.control())}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=T({type:n,selectors:[["pgm-text-input"]],inputs:{label:[1,"label"],control:[1,"control"],name:[1,"name"],value:[1,"value"],placeholder:[1,"placeholder"],type:[1,"type"],required:[1,"required"],readonly:[1,"readonly"],pattern:[1,"pattern"],autofocus:[1,"autofocus"]},outputs:{changed:"changed",blurEvent:"blurEvent",focusEvent:"focusEvent",keyupEvent:"keyupEvent",pasteEvent:"pasteEvent",clearClicked:"clearClicked"},decls:6,vars:7,consts:[[1,"input-container"],[3,"for"],[3,"input","blur","focus","keyup","paste","id","type","value","placeholder","formControl"],[1,"input-container__clear-button"],[1,"input-container__error"],[1,"input-container__clear-button",3,"click"],[1,"material-icons"]],template:function(i,t){i&1&&(p(0,"div",0),f(1,U,2,2,"label",1),p(2,"input",2),v("input",function(o){return t.onInputChange(o)})("blur",function(o){return t.onBlur(o)})("focus",function(o){return t.onFocus(o)})("keyup",function(o){return t.onKeyup(o)})("paste",function(o){return t.onPaste(o)}),u(),f(3,q,3,0,"button",3),O(4,G,2,1,"small",4,x),u()),i&2&&(l(),g(t.label()?1:-1),l(),_("id",t.label())("type",t.type())("value",t.value())("placeholder",t.placeholder())("formControl",t.control()),l(),g(t.type()==="search"&&t.control().value?3:-1),l(),w(t.getErrors()))},dependencies:[V,K,j,J,R],styles:[".input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:1rem}@media (min-width: 768px){.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:1.2rem}}@media (min-width: 1200px){.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:1.4rem}}.input-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;position:relative}.input-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:400;color:#6c757d}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid #dee2e6;border-radius:.5rem;transition:border-color .3s ease}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:#749483;border-color:#749483}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{cursor:not-allowed;background:#ced4da;color:#fff}.input-container__clear-button[_ngcontent-%COMP%]{position:absolute;color:#749483;right:.1rem;top:1.4rem}.input-container__error[_ngcontent-%COMP%]{color:#dc3545}"],changeDetection:0})}}return n})();export{A as a,N as b,ne as c,pe as d};
