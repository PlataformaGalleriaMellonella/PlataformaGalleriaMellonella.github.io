import{b as T}from"./chunk-OVBUSPGG.js";import"./chunk-M7ZMZR2Y.js";import{a as D}from"./chunk-DPP647ZV.js";import{b as y}from"./chunk-RELJB3SA.js";import{b as M,d as p,e as P,f as O,j as S,l as w,m as F,o as E,q as _,s as L,t as q}from"./chunk-7OKYXSIP.js";import{a as R}from"./chunk-6RYTH6XX.js";import{g as v,j as x}from"./chunk-QIC2KWTW.js";import"./chunk-IM67MRJR.js";import{$a as h,Bb as u,Jb as m,Kb as b,Qb as f,Sa as n,da as g,mb as i,ta as C,ua as l,ub as r,vb as a,wa as k,wb as s}from"./chunk-ZFSUHPNE.js";var N=(()=>{class c{constructor(){this.checked=l(!1),this.checkedChange=C(),this.control=l.required(),this.customClass=l(""),this.indeterminate=l(!1),this.label=l.required(),this.name=l(""),this.required=l(!1),this.value=l("",{transform:o=>o.trim()})}onCheckboxChange(o){let t=o.target;this.checkedChange.emit(t.checked)}static{this.\u0275fac=function(t){return new(t||c)}}static{this.\u0275cmp=h({type:c,selectors:[["pgm-checkbox"]],inputs:{checked:[1,"checked"],control:[1,"control"],customClass:[1,"customClass"],indeterminate:[1,"indeterminate"],label:[1,"label"],name:[1,"name"],required:[1,"required"],value:[1,"value"]},outputs:{checkedChange:"checkedChange"},decls:6,vars:9,consts:[[1,"checkbox"],["id","checkbox","type","checkbox",1,"checkbox__input",3,"change","formControl","checked","required","name","value","indeterminate"],[1,"checkbox__checkmark"],["for","checkbox",1,"checkbox__label"],[3,"control","name"]],template:function(t,e){t&1&&(r(0,"label",0)(1,"input",1),u("change",function(V){return e.onCheckboxChange(V)}),a(),s(2,"span",2),r(3,"label",3),m(4),a()(),s(5,"pgm-field-errors",4)),t&2&&(n(),i("formControl",e.control())("checked",e.checked())("required",e.required())("name",e.name())("value",e.value())("indeterminate",e.indeterminate()),n(3),b(e.label()),n(),i("control",e.control())("name",e.name()))},dependencies:[_,M,P,E,w,q],styles:['.checkbox[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;-webkit-user-select:none;user-select:none}.checkbox__input[_ngcontent-%COMP%]{position:absolute;width:0;height:0;cursor:pointer;opacity:0}.checkbox__checkmark[_ngcontent-%COMP%]{position:relative;display:inline-block;width:22px;height:22px;background-color:#e9ecef;border-radius:.5rem;transition:all .3s ease}.checkbox__checkmark[_ngcontent-%COMP%]:after{position:absolute;top:5px;left:9px;display:none;width:5px;height:10px;content:"";border:solid #fff;border-width:0 3px 3px 0;transform:rotate(45deg)}.checkbox[_ngcontent-%COMP%]:hover   input[_ngcontent-%COMP%] ~ .checkmark[_ngcontent-%COMP%]{background-color:#ced4da}.checkbox__input[_ngcontent-%COMP%]:checked ~ .checkbox__checkmark[_ngcontent-%COMP%]{background-color:#749483}.checkbox__input[_ngcontent-%COMP%]:checked ~ .checkbox__checkmark[_ngcontent-%COMP%]:after{display:block}.checkbox__label[_ngcontent-%COMP%]{margin-left:.5rem;line-height:1.5rem;cursor:pointer}'],changeDetection:0})}}return c})();var z=()=>["/acesso-comunidade","esqueci-senha"],A=()=>["/acesso-comunidade","cadastro"],re=(()=>{class c{constructor(){this.isLoading=k(!1),this.formService=g(L),this.loginForm=this.formService.createForm({email:{validators:[p.required,p.email]},password:{validators:[p.required,p.minLength(6)]},remember:{value:!1}}),this.activatedRoute=g(v),this.authService=g(T),this.navigationService=g(y)}getControl(o){return this.loginForm.get(o)}onSubmit(){if(this.loginForm.valid){this.isLoading.set(!0);let{email:o,password:t}=this.loginForm.getRawValue(),e=this.activatedRoute.snapshot.queryParams;this.authService.login(o,t).subscribe({error:d=>{console.error("Login failed:",d),this.isLoading.set(!1)},next:()=>{let d=e.returnUrl||"/comunidade";this.navigationService.navigateToUrl(d),this.isLoading.set(!1)}})}}static{this.\u0275fac=function(t){return new(t||c)}}static{this.\u0275cmp=h({type:c,selectors:[["pgm-login"]],decls:19,vars:11,consts:[[1,"login"],[1,"login__container"],[1,"login__title"],[1,"login__message"],[1,"login__form",3,"ngSubmit","formGroup"],["label","Email","type","email","placeholder","Digite seu email","name","email",3,"control"],["label","Senha","type","password","placeholder","Digite sua senha","name","senha",3,"control"],["label","Lembrar de mim",3,"control"],[1,"login__links"],[1,"login__forgot-password",3,"routerLink"],["text","Entrar","loadingText","Entrando...","type","submit",3,"loading","disabled","block"],[1,"login__register"],[3,"routerLink"]],template:function(t,e){t&1&&(r(0,"div",0)(1,"div",1)(2,"h1",2),m(3,"Bem-vindo de volta!"),a(),r(4,"p",3),m(5,"Fa\xE7a login para acessar a plataforma."),a(),r(6,"form",4),u("ngSubmit",function(){return e.onSubmit()}),s(7,"pgm-text-input",5)(8,"pgm-text-input",6)(9,"pgm-checkbox",7),r(10,"div",8)(11,"a",9),m(12," Esqueci minha senha "),a()(),s(13,"pgm-button",10),a(),r(14,"div",11)(15,"span"),m(16,"N\xE3o tem uma conta?"),a(),r(17,"a",12),m(18,"Cadastre-se"),a()()()()),t&2&&(n(6),i("formGroup",e.loginForm),n(),i("control",e.getControl("email")),n(),i("control",e.getControl("password")),n(),i("control",e.getControl("remember")),n(2),i("routerLink",f(9,z)),n(2),i("loading",e.isLoading())("disabled",e.loginForm.invalid)("block",!0),n(4),i("routerLink",f(10,A)))},dependencies:[_,S,O,F,x,R,D,N],styles:[".login[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;background:linear-gradient(135deg,#5d786a,#749483)}.login__container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem;width:95vw;background-color:#fff;border-radius:.5rem;padding:3rem}@media (min-width: 768px){.login__container[_ngcontent-%COMP%]{padding:4.5rem}}@media (min-width: 1200px){.login__container[_ngcontent-%COMP%]{padding:6rem}}@media (min-width: 768px){.login__container[_ngcontent-%COMP%]{width:80vw}}@media (min-width: 1200px){.login__container[_ngcontent-%COMP%]{width:35vw}}.login__title[_ngcontent-%COMP%]{color:#749483;text-align:center;font-size:2.5rem}@media (min-width: 768px){.login__title[_ngcontent-%COMP%]{font-size:3rem}}@media (min-width: 1200px){.login__title[_ngcontent-%COMP%]{font-size:4rem}}.login__message[_ngcontent-%COMP%]{text-align:center}.login__form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.login__links[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end}.login__register[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem;align-items:center;justify-content:center}.login__register[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#343a40}"],changeDetection:0})}}return c})();export{re as LoginComponent};
